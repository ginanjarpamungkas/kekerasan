<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kekerasan</title>
    <meta http-equiv="pragma" content="no cache">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="language" content="id" />
    <meta name="title" content="Kekerasan"/>
    <meta name="description" content="Deskripsi kekerasan" />
    <meta name="author" content="Tempo.co">
    <meta name="keywords" content="cop26">
    <meta name="copyright" content="">
    <meta name="coverage" content="wordWide">
    <meta name="creation date" content="2020-07-16">
    <meta name="rating" content="General">
    <meta name="robots" content="follow">
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="id_ID" />
    <meta property="og:title" content="Kekerasan"/>
    <meta property="og:description" content="Deskripsi kekerasan" />
    <meta property="og:image" content="assets/images/bg.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Kekerasan" />
    <meta name="twitter:description" content="Deskripsi kekerasan" />
    <meta name="twitter:image:src" content="assets/images/bg.png">
    <meta name="twitter:image:width" content="650" />
    <meta name="twitter:image:height" content="433" />
    <meta property="fb:app_id" content="332404380172618" />
    <meta property="fb:pages" content="160355148441">
    <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/animate.css">
</head>
<body>
    <div id="blog_preloader_wrapper" style="display: none">
        <div id="blog_preloader_box">
             <div class="blog_loader">
                 <div></div><div></div>
             </div>
        </div>
   </div>
    <div class="container">
        <nav class="navbar navbar-expand-xl">
            <a class="navbar-brand" href="index.html"><img src="assets/images/logo-merah.png" alt="logo" class="d-inline-block align-top" width="200"></a>
            <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" style="outline: none !important;">
                <span class="navbar-toggler-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" class="cookie_close_icon" viewBox="0 0 32 32"><path fill-rule="evenodd"  fill="rgb(255, 255, 255)" d="M19.803,16.000 L31.211,4.592 C32.261,3.542 32.261,1.839 31.211,0.789 C30.161,-0.261 28.459,-0.261 27.408,0.789 L16.000,12.197 L4.591,0.789 C3.541,-0.261 1.839,-0.261 0.789,0.789 C-0.261,1.839 -0.261,3.542 0.789,4.592 L12.197,16.000 L0.789,27.408 C-0.261,28.459 -0.261,30.161 0.789,31.211 C1.839,32.261 3.541,32.261 4.591,31.211 L16.000,19.803 L27.408,31.211 C28.458,32.261 30.161,32.261 31.211,31.211 C32.261,30.161 32.261,28.459 31.211,27.408 L19.803,16.000 Z"/></svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" class="cookie_open_icon" viewBox="0 0 13 13"><path fill-rule="evenodd" fill="rgb(255, 255, 255)" d="M0.001,10.115 L0.001,7.969 L13.000,7.969 L13.000,10.115 L0.001,10.115 ZM3.649,6.028 L3.649,3.881 L12.992,3.881 L12.992,6.028 L3.649,6.028 ZM0.001,-0.002 L13.000,-0.002 L13.000,2.145 L0.001,2.145 L0.001,-0.002 ZM12.992,13.998 L3.649,13.998 L3.649,11.853 L12.992,11.853 L12.992,13.998 Z"></path></svg>
                </span>
            </button>
          
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="index.html">Beranda <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="cerita-korban.html">Cerita Korban</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="daftar-korban.html">Daftar Korban</a>
                    </li>
                </ul>
            </div>
          </nav>
    </div>
    <div class="container" style="padding-bottom: 5rem;">
        <div class="victim-story pt-5 mt-3 victim-story-effect hide">
            <h3 class="heading-title pb-5">Daftar Korban</h3>
            <div class="container">
                <div class="row content">
                </div>
                <div class="paginator"></div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div>
            <section class="footer-main">
                <div class="overlay"></div>
                <div class="container">
                    <div class="flex">
                        <div class="logo">
                            <img src="assets/images/logo-merah.png" alt="">
                            <p>Website ini dikelola secara kolaboratif oleh Tempo.co</p>
                        </div>
                        <div class="menu">
                            <ul>
                                <li class="title">Menu</li>
                                <li><a href="index.html">Beranda</a></li>
                                <li><a href="cerita-korban.html">Cerita Korban</a></li>
                                <li><a href="daftar-korban">Daftar Korban</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
            <section style="background-color: #000;transition: background .3s,border .3s,border-radius .3s,box-shadow .3s;">
                <div style="min-height: 35px;">
                    <div class="container">
                        <p style="color: #fff;font-family: poppins,Sans-serif;font-size: 14px;font-weight: 400;margin: 0;">Data Kekerasan</p>
                    </div>
                </div>
            </section>
        </div>
    </div>

<div class="modal fade" id="modal-detail" tabindex="-1" role="dialog" aria-labelledby="modal-detail-title" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #1d2c48 !important;">
                <h4 class="modal-title m-0" id="modal-detail-title" style="color: #fff;">Detail Kekerasan</h4>
                <button type="button" class="close " data-dismiss="modal" aria-label="Close"><span aria-hidden="true" style="color: #fff;">&times;</button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-3 text-center mb-3">
                        <img src="assets/images/user.png" alt="" class="img-fluid">
                    </div>
                    <div class="col-lg-9">
                        <div class="row">
                            <div class="col-12 col-md-6 mb-3">
                                <h4>Nama Korban</h4>
                                <h5 class="nama-korban">N/A</h5>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <h4>Profesi Korban</h4>
                                <h5 class="profesi-korban">N/A</h5>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <h4>Kota Asal</h4>
                                <h5 class="asal-korban">N/A</h5>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <h4>Tanggal</h4>
                                <h5 class="tanggal">N/A</h5>
                            </div>
                            <div class="col-12 mb-3">
                                <h4>Jenis Kekerasan</h4>
                                <h5 class="kekerasan">N/A</h5>
                            </div>
                            <div class="col-12 mb-3">
                                <h4>Media</h4>
                                <h5 class="media">N/A</h5>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <h4>Pelaku</h4>
                                <h5 class="pelaku">N/A</h5>
                            </div>
                            <div class="col-12 col-md-6 mb-3">
                                <h4>Profesi Pelaku</h4>
                                <h5 class="profesi-pelaku">N/A</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" data-dismiss="modal">Tutup</button>
            </div>
        </div>
    </div>
</div>
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/d3.js"></script>
<script src="assets/js/moment.js"></script>
<script src="assets/js/ScrollMagic.min.js"></script>
<script src="assets/js/debug.addIndicators.js"></script>
<script src="assets/js/animate.js"></script>
<script>
    var parsedCSV;
    d3.text("database.csv", function(data) {
        parsedCSV = d3.dsv(';').parseRows(data); 
        const listArray = [];
            $.each(parsedCSV,function(i,d) {
            if (d[6] != '') {
                var nama_korban = d[6]
            }else{
                var nama_korban = 'N/A'
            }
            if (d[11] != '') {
                var profesi_korban = d[11]
            }else{
                var profesi_korban = 'N/A'
            }
            if (d[8] != '') {
                var asal_korban = d[8]
            }else{
                var asal_korban = 'N/A'
            }
            if (kekerasan != '') {
                var kekerasan = d[4]
            }else{
                var kekerasan = 'N/A'
            }

            var tgl_kejadian = moment(d[2], 'DD/MM/YYYY')
            
            listArray.push('<div class="col-lg-12 col-md-6 col-sm-12"><div class="victim-container"><div class="row"><div class="col-sm-12 col-md-12 col-lg-3"><a href="tes" style="display: block;"><img src="assets/images/user.png" alt=""></a></div><div class="col-sm-12 col-md-12 col-lg-9"><div class="row" style="padding: 10px;"><div class="col-12 col-md-12 col-lg-8 mb-3"><h4>Nama Korban</h4><a href=""><h5 class="nama-korban">'+nama_korban+'</h5></a></div><div class="col-12 col-md-6 col-lg-4 mb-3"><h4>Profesi Korban</h4><h5 class="profesi-korban">'+profesi_korban+'</h5></div><div class="col-12 col-md-6 col-lg-4 mb-3"><h4>Kota Asal</h4><h5 class="asal-korban">'+asal_korban+'</h5></div><div class="col-12 col-md-6 col-lg-4 mb-3"><h4>Tanggal</h4><h5 class="tanggal">'+tgl_kejadian.format("DD-MM-YYYY")+'</h5></div><div class="col-12 col-md-6 col-lg-4 mb-3"><h4>Jenis Kekerasan</h4><h5 class="kekerasan">'+kekerasan+'</h5></div></div></div></div></div></div>')
        })

        const numberOfItems = listArray.length
        const numberPerPage = 10
        const currentPage = 1

        const numberOfPages = Math.ceil(numberOfItems/numberPerPage)

        function accomodatePage(clickedPage) {
            if (clickedPage < 1) { return clickedPage + 1}
            if (clickedPage > numberOfPages) { return clickedPage -1}
            return clickedPage
        }

        function buildPagination(clickedPage) {
            $('.paginator').empty()
            const currPageNum = accomodatePage(clickedPage)
            if (numberOfPages >= 3) {
                if (currPageNum == 1) {
                    $('.paginator').append(`<button class="btn btn-primary" disabled value="${currPageNum-1}">PREVIOUS</button>`)
                    for (let i=0; i<5; i++) {
                        if (currPageNum+i == currPageNum) {
                            var btn = 'btn-primary'
                            var hide = 'disabled'
                        } else {
                            var btn = 'btn-secondary'
                            var hide = ''
                        }
                        $('.paginator').append(`<button class="btn ${btn}" ${hide} value="${currPageNum+i}">${currPageNum+i}</button>`)
                    }
                    $('.paginator').append(`<button class="btn btn-primary" value="${currPageNum+1}">NEXT</button>`)
                }
                if (currPageNum == 2) {
                    $('.paginator').append(`<button class="btn btn-primary" value="${currPageNum-1}">PREVIOUS</button>`)
                    for (let i=-1; i<4; i++) {
                        if (currPageNum+i == currPageNum) {
                            var btn = 'btn-primary'
                            var hide = 'disabled'
                        } else {
                            var btn = 'btn-secondary'
                            var hide = ''
                        }
                        $('.paginator').append(`<button class="btn ${btn}" ${hide} value="${currPageNum+i}">${currPageNum+i}</button>`)
                    }
                    $('.paginator').append(`<button class="btn btn-primary" value="${currPageNum+1}">NEXT</button>`)
                }

                if (currPageNum > 2 && currPageNum < numberOfPages-1) {
                    $('.paginator').append(`<button class="btn btn-primary" value="${currPageNum-1}">PREVIOUS</button>`)
                    for (let i=-2; i<3; i++) {
                        if (currPageNum+i == currPageNum) {
                            var btn = 'btn-primary'
                            var hide = 'disabled'
                        } else {
                            var btn = 'btn-secondary'
                            var hide = ''
                        }
                        $('.paginator').append(`<button class="btn ${btn}" ${hide} value="${currPageNum+i}">${currPageNum+i}</button>`)
                    }
                    $('.paginator').append(`<button class="btn btn-primary" value="${currPageNum+1}">NEXT</button>`)
                }

                if (currPageNum == numberOfPages-1) {
                    $('.paginator').append(`<button class="btn btn-primary" value="${currPageNum-1}">PREVIOUS</button>`)
                    for (let i=-3; i<2; i++) {
                        if (currPageNum+i == currPageNum) {
                            var btn = 'btn-primary'
                            var hide = 'disabled'
                        } else {
                            var btn = 'btn-secondary'
                            var hide = ''
                        }
                        $('.paginator').append(`<button class="btn ${btn}" ${hide} value="${currPageNum+i}">${currPageNum+i}</button>`)
                    }
                    $('.paginator').append(`<button class="btn btn-primary" value="${currPageNum+1}">NEXT</button>`)
                }

                if (currPageNum == numberOfPages) {
                    $('.paginator').append(`<button class="btn btn-primary" value="${currPageNum-1}">PREVIOUS</button>`)
                    for (let i=-4; i < 1; i++) {
                        if (currPageNum+i == currPageNum) {
                            var btn = 'btn-primary'
                            var hide = 'disabled'
                        } else {
                            var btn = 'btn-secondary'
                            var hide = ''
                        }
                        $('.paginator').append(`<button class="btn ${btn}" ${hide} value="${currPageNum+i}">${currPageNum+i}</button>`)
                    }
                    $('.paginator').append(`<button class="btn btn-primary" disabled value="${currPageNum+1}">NEXT</button>`)
                }
                
            } else {
                for (let i=0; i<numberOfPages; i++) {
                    $('.paginator').append(`<button class="btn btn-primary" value="${i+1}">${i+1}</button>`)
                }
            }
        }

        function buildPage(currPage) {
            const trimStart = (currPage-1)*numberPerPage
            const trimEnd = trimStart + numberPerPage
            $('.content').empty().append(listArray.slice(trimStart, trimEnd))
        }

        $(document).ready(function(){
            buildPage(1)
            buildPagination(currentPage)

            $('.paginator').on('click', 'button', function() {
                $("#blog_preloader_box").show();
                $("#blog_preloader_wrapper").show();
                var clickedPage = parseInt($(this).val())
                buildPagination(clickedPage)
                buildPage(clickedPage)
                // $('html, body').animate({scrollTop:0}, 'slow');
                $(window).scrollTop(0);
                $("#blog_preloader_box").fadeOut();
                $("#blog_preloader_wrapper").delay(500).fadeOut("slow");
            });
        });
    });
</script>
</body>
</html>